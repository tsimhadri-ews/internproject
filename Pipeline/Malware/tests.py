def test_preprocess():
    from pandas.api.types import is_numeric_dtype
    import requests
    import sys
    import unittest
    
    class TestRunModel(unittest.TestCase):
        url = "https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/malwarefunctions.py"
        response = requests.get(url)
        lines = response.text.strip().split("\n")
        packages = ""
        functions = {}
        function_name = ""
        inside_function = False

        for line in lines:
            if line.strip().startswith("import ") or line.strip().startswith("from ") :
                packages += line + "\n"
            if line.strip().startswith("def "):
                function_name = line.replace('(', ' ').split()[1]
                functions[function_name] = packages + line + "\n"
                inside_function = True
            elif inside_function and line.strip().startswith("def "):
                functions[function_name] = functions.get(function_name) + line
                function_name = ""
                inside_function = False
            elif inside_function and not line.strip().startswith("\"\"\""):
                functions[function_name] = functions.get(function_name) + line + "\n"


        exec(functions.get("zscore_normalization"), globals())
        exec(functions.get("preprocess"), globals())
            
        url = "https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/malwarefunctions.py"
        response = requests.get(url)
        lines = response.text.strip().split("\n")
        packages = ""
        functions = {}
        function_name = ""
        inside_function = False

        for line in lines:
            if line.strip().startswith("import ") or line.strip().startswith("from ") :
                packages += line + "\n"
            if line.strip().startswith("def "):
                function_name = line.replace('(', ' ').split()[1]
                functions[function_name] = packages + line + "\n"
                inside_function = True
            elif inside_function and line.strip().startswith("def "):
                functions[function_name] = functions.get(function_name) + line
                function_name = ""
                inside_function = False
            elif inside_function and not line.strip().startswith("\"\"\""):
                functions[function_name] = functions.get(function_name) + line + "\n"

        exec(functions.get("zscore_normalization"), globals())
        exec(functions.get("preprocess"), globals())
        
        def test_df_shape(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            self.assertEqual(df.shape, (138047, 57))
        def test_value_counts(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            self.assertEqual(df['legitimate'].value_counts()[0], 96724)
            self.assertEqual(df['legitimate'].value_counts()[1], 41323)
        def test_normalization(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X = df.drop(columns=['legitimate'])
            for label, content in X.describe().items():
                if label != "legitimate":
                    self.assertAlmostEqual(content['mean'], 0)
                    self.assertAlmostEqual(content['std'], 1)
        def test_components_drop(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            self.assertEqual(df.shape, (138047, 37))
        
    suite = unittest.TestLoader().loadTestsFromTestCase(TestRunModel)
    unittest.TextTestRunner(verbosity=4,stream=sys.stderr).run(suite)

def test_gbc():
    from pandas.api.types import is_numeric_dtype
    import requests
    import sys
    import unittest
    from sklearn.ensemble import GradientBoostingClassifier
    
    class TestRunModel(unittest.TestCase):
        url = "https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/malwarefunctions.py"
        response = requests.get(url)
        lines = response.text.strip().split("\n")
        packages = ""
        functions = {}
        function_name = ""
        inside_function = False

        for line in lines:
            if line.strip().startswith("import ") or line.strip().startswith("from ") :
                packages += line + "\n"
            if line.strip().startswith("def "):
                function_name = line.replace('(', ' ').split()[1]
                functions[function_name] = packages + line + "\n"
                inside_function = True
            elif inside_function and line.strip().startswith("def "):
                functions[function_name] = functions.get(function_name) + line
                function_name = ""
                inside_function = False
            elif inside_function and not line.strip().startswith("\"\"\""):
                functions[function_name] = functions.get(function_name) + line + "\n"

        exec(functions.get("zscore_normalization"), globals())
        exec(functions.get("preprocess"), globals())
        exec(functions.get("traintest_split"), globals())
            
        def test_gbc_training(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = GradientBoostingClassifier(random_state=42)
            model.fit(X_train, y_train)
            self.assertIsNotNone(model)
            self.assertTrue(hasattr(model, 'feature_importances_'))
        def test_gbc_prediction(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = GradientBoostingClassifier(random_state=42)
            model.fit(X_train, y_train)
            predictions = model.predict(X_test)
            self.assertEqual(len(predictions), len(X_test))
        def test_gbc_accuracy(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = GradientBoostingClassifier(random_state=42)
            model.fit(X_train, y_train)
            predictions = model.predict(X_test)
            accuracy = accuracy_score(y_test, predictions)
            f1 = f1_score(y_test, predictions)
            self.assertGreaterEqual(accuracy, 0.9)
            self.assertGreaterEqual(f1, 0.9)

    suite = unittest.TestLoader().loadTestsFromTestCase(TestRunModel)
    unittest.TextTestRunner(verbosity=4,stream=sys.stderr).run(suite)

def test_nb():
    from pandas.api.types import is_numeric_dtype
    import requests
    import sys
    import unittest
    from sklearn.naive_bayes import GaussianNB
    
    class TestRunModel(unittest.TestCase):
        url = "https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/malwarefunctions.py"
        response = requests.get(url)
        lines = response.text.strip().split("\n")
        packages = ""
        functions = {}
        function_name = ""
        inside_function = False

        for line in lines:
            if line.strip().startswith("import ") or line.strip().startswith("from ") :
                packages += line + "\n"
            if line.strip().startswith("def "):
                function_name = line.replace('(', ' ').split()[1]
                functions[function_name] = packages + line + "\n"
                inside_function = True
            elif inside_function and line.strip().startswith("def "):
                functions[function_name] = functions.get(function_name) + line
                function_name = ""
                inside_function = False
            elif inside_function and not line.strip().startswith("\"\"\""):
                functions[function_name] = functions.get(function_name) + line + "\n"

        exec(functions.get("zscore_normalization"), globals())
        exec(functions.get("preprocess"), globals())
        exec(functions.get("traintest_split"), globals())
            
        def test_nb_training(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = GaussianNB()
            model.fit(X_train, y_train)
            self.assertIsNotNone(model)
            self.assertTrue(hasattr(model, 'class_prior_'))
        def test_nb_prediction(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = GaussianNB()
            model.fit(X_train, y_train)
            predictions = model.predict(X_test)
            self.assertEqual(len(predictions), len(X_test))
        def test_nb_accuracy(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = GaussianNB()
            model.fit(X_train, y_train)
            predictions = model.predict(X_test)
            accuracy = accuracy_score(y_test, predictions)
            f1 = f1_score(y_test, predictions)
            self.assertGreaterEqual(accuracy, 0.9)
            self.assertGreaterEqual(f1, 0.9)

    suite = unittest.TestLoader().loadTestsFromTestCase(TestRunModel)
    unittest.TextTestRunner(verbosity=4,stream=sys.stderr).run(suite)

def test_ann():
    from pandas.api.types import is_numeric_dtype
    import requests
    import sys
    import unittest
    
    class TestRunModel(unittest.TestCase):
        url = "https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/malwarefunctions.py"
        response = requests.get(url)
        lines = response.text.strip().split("\n")
        packages = ""
        functions = {}
        function_name = ""
        inside_function = False

        for line in lines:
            if line.strip().startswith("import ") or line.strip().startswith("from ") :
                packages += line + "\n"
            if line.strip().startswith("def "):
                function_name = line.replace('(', ' ').split()[1]
                functions[function_name] = packages + line + "\n"
                inside_function = True
            elif inside_function and line.strip().startswith("def "):
                functions[function_name] = functions.get(function_name) + line
                function_name = ""
                inside_function = False
            elif inside_function and not line.strip().startswith("\"\"\""):
                functions[function_name] = functions.get(function_name) + line + "\n"

        exec(functions.get("zscore_normalization"), globals())
        exec(functions.get("preprocess"), globals())
        exec(functions.get("traintest_split"), globals())
            
        def test_ann_training(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            input_shape = [X_train.shape[1]]
            model = tf.keras.Sequential([
                tf.keras.layers.Dense(units=64, activation='relu', input_shape=input_shape),
                tf.keras.layers.Dense(units=64, activation='relu'),
                tf.keras.layers.Dense(units=1)
            ])
            model.build()
            model.compile(optimizer='adam', loss='mae', metrics=['accuracy'])  
            earlystopping = callbacks.EarlyStopping(monitor="val_loss",
                                                        mode="min",
                                                        patience=5,
                                                        restore_best_weights=True)
            history = model.fit(X_train, y_train, validation_data=(X_test,y_test), batch_size=256, epochs=60,callbacks=[earlystopping], verbose=0)
            self.assertIsNotNone(model)
        def test_ann_prediction(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            input_shape = [X_train.shape[1]]
            model = tf.keras.Sequential([
                tf.keras.layers.Dense(units=64, activation='relu', input_shape=input_shape),
                tf.keras.layers.Dense(units=64, activation='relu'),
                tf.keras.layers.Dense(units=1)
            ])
            model.build()
            model.compile(optimizer='adam', loss='mae', metrics=['accuracy'])  
            earlystopping = callbacks.EarlyStopping(monitor="val_loss",
                                                        mode="min",
                                                        patience=5,
                                                        restore_best_weights=True)
            history = model.fit(X_train, y_train, validation_data=(X_test,y_test), batch_size=256, epochs=60,callbacks=[earlystopping], verbose=0)
            predictions = (model.predict(X_test) > 0.5).astype("int32")
            self.assertEqual(len(predictions), len(X_test))
        def test_ann_accuracy(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            input_shape = [X_train.shape[1]]
            model = tf.keras.Sequential([
                tf.keras.layers.Dense(units=64, activation='relu', input_shape=input_shape),
                tf.keras.layers.Dense(units=64, activation='relu'),
                tf.keras.layers.Dense(units=1)
            ])
            model.build()
            model.compile(optimizer='adam', loss='mae', metrics=['accuracy'])  
            earlystopping = callbacks.EarlyStopping(monitor="val_loss",
                                                        mode="min",
                                                        patience=5,
                                                        restore_best_weights=True)
            history = model.fit(X_train, y_train, validation_data=(X_test,y_test), batch_size=256, epochs=60,callbacks=[earlystopping], verbose=0)
            self.assertGreater(history.history['accuracy'][-1], 0.9)

    suite = unittest.TestLoader().loadTestsFromTestCase(TestRunModel)
    unittest.TextTestRunner(verbosity=4,stream=sys.stderr).run(suite)

def test_svm():
    from pandas.api.types import is_numeric_dtype
    import requests
    import sys
    import unittest
    from sklearn.svm import SVC
    
    class TestRunModel(unittest.TestCase):
        url = "https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/malwarefunctions.py"
        response = requests.get(url)
        lines = response.text.strip().split("\n")
        packages = ""
        functions = {}
        function_name = ""
        inside_function = False

        for line in lines:
            if line.strip().startswith("import ") or line.strip().startswith("from ") :
                packages += line + "\n"
            if line.strip().startswith("def "):
                function_name = line.replace('(', ' ').split()[1]
                functions[function_name] = packages + line + "\n"
                inside_function = True
            elif inside_function and line.strip().startswith("def "):
                functions[function_name] = functions.get(function_name) + line
                function_name = ""
                inside_function = False
            elif inside_function and not line.strip().startswith("\"\"\""):
                functions[function_name] = functions.get(function_name) + line + "\n"

        exec(functions.get("zscore_normalization"), globals())
        exec(functions.get("preprocess"), globals())
        exec(functions.get("traintest_split"), globals())
            
        def test_svm_training(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = SVC(random_state=42)
            model.fit(X_train, y_train)
            self.assertIsNotNone(model)
            self.assertTrue(hasattr(model, 'class_weight_'))
        def test_svm_prediction(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = SVC(random_state=42)
            model.fit(X_train, y_train)
            predictions = model.predict(X_test)
            self.assertEqual(len(predictions), len(X_test))
        def test_svm_accuracy(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = SVC(random_state=42)
            model.fit(X_train, y_train)
            predictions = model.predict(X_test)
            accuracy = accuracy_score(y_test, predictions)
            f1 = f1_score(y_test, predictions)
            self.assertGreaterEqual(accuracy, 0.9)
            self.assertGreaterEqual(f1, 0.9)

    suite = unittest.TestLoader().loadTestsFromTestCase(TestRunModel)
    unittest.TextTestRunner(verbosity=4,stream=sys.stderr).run(suite)

def test_logreg():
    from pandas.api.types import is_numeric_dtype
    import requests
    import sys
    import unittest
    from sklearn.linear_model import LogisticRegression
    
    class TestRunModel(unittest.TestCase):
        url = "https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/malwarefunctions.py"
        response = requests.get(url)
        lines = response.text.strip().split("\n")
        packages = ""
        functions = {}
        function_name = ""
        inside_function = False

        for line in lines:
            if line.strip().startswith("import ") or line.strip().startswith("from ") :
                packages += line + "\n"
            if line.strip().startswith("def "):
                function_name = line.replace('(', ' ').split()[1]
                functions[function_name] = packages + line + "\n"
                inside_function = True
            elif inside_function and line.strip().startswith("def "):
                functions[function_name] = functions.get(function_name) + line
                function_name = ""
                inside_function = False
            elif inside_function and not line.strip().startswith("\"\"\""):
                functions[function_name] = functions.get(function_name) + line + "\n"

        exec(functions.get("zscore_normalization"), globals())
        exec(functions.get("preprocess"), globals())
        exec(functions.get("traintest_split"), globals())
            
        def test_logreg_training(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = LogisticRegression(random_state=42, solver='sag')
            model.fit(X_train, y_train)
            self.assertIsNotNone(model)
            self.assertTrue(hasattr(model, 'intercept_'))
        def test_logreg_prediction(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = LogisticRegression(random_state=42, solver='sag')
            model.fit(X_train, y_train)
            predictions = model.predict(X_test)
            self.assertEqual(len(predictions), len(X_test))
        def test_logreg_accuracy(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = LogisticRegression(random_state=42, solver='sag')
            model.fit(X_train, y_train)
            predictions = model.predict(X_test)
            accuracy = accuracy_score(y_test, predictions)
            f1 = f1_score(y_test, predictions)
            self.assertGreaterEqual(accuracy, 0.9)
            self.assertGreaterEqual(f1, 0.9)

    suite = unittest.TestLoader().loadTestsFromTestCase(TestRunModel)
    unittest.TextTestRunner(verbosity=4,stream=sys.stderr).run(suite)


def test_rfc():
    from pandas.api.types import is_numeric_dtype
    import requests
    import sys
    import unittest
    from sklearn.ensemble import RandomForestClassifier
    
    class TestRunModel(unittest.TestCase):
        url = "https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/malwarefunctions.py"
        response = requests.get(url)
        lines = response.text.strip().split("\n")
        packages = ""
        functions = {}
        function_name = ""
        inside_function = False

        for line in lines:
            if line.strip().startswith("import ") or line.strip().startswith("from ") :
                packages += line + "\n"
            if line.strip().startswith("def "):
                function_name = line.replace('(', ' ').split()[1]
                functions[function_name] = packages + line + "\n"
                inside_function = True
            elif inside_function and line.strip().startswith("def "):
                functions[function_name] = functions.get(function_name) + line
                function_name = ""
                inside_function = False
            elif inside_function and not line.strip().startswith("\"\"\""):
                functions[function_name] = functions.get(function_name) + line + "\n"

        exec(functions.get("zscore_normalization"), globals())
        exec(functions.get("preprocess"), globals())
        exec(functions.get("traintest_split"), globals())
            
        def test_rfc_training(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = RandomForestClassifier(random_state=42)
            model.fit(X_train, y_train)
            self.assertIsNotNone(model)
            self.assertTrue(hasattr(model, 'max_depth'))
        def test_rfc_prediction(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = RandomForestClassifier(random_state=42)
            model.fit(X_train, y_train)
            predictions = model.predict(X_test)
            self.assertEqual(len(predictions), len(X_test))
        def test_rfc_accuracy(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = RandomForestClassifier(random_state=42)
            model.fit(X_train, y_train)
            predictions = model.predict(X_test)
            accuracy = accuracy_score(y_test, predictions)
            f1 = f1_score(y_test, predictions)
            self.assertGreaterEqual(accuracy, 0.9)
            self.assertGreaterEqual(f1, 0.9)

    suite = unittest.TestLoader().loadTestsFromTestCase(TestRunModel)
    unittest.TextTestRunner(verbosity=4,stream=sys.stderr).run(suite)

def test_dtc():
    from pandas.api.types import is_numeric_dtype
    import requests
    import sys
    import unittest
    from sklearn.tree import DecisionTreeClassifier
    
    class TestRunModel(unittest.TestCase):
        url = "https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/malwarefunctions.py"
        response = requests.get(url)
        lines = response.text.strip().split("\n")
        packages = ""
        functions = {}
        function_name = ""
        inside_function = False

        for line in lines:
            if line.strip().startswith("import ") or line.strip().startswith("from ") :
                packages += line + "\n"
            if line.strip().startswith("def "):
                function_name = line.replace('(', ' ').split()[1]
                functions[function_name] = packages + line + "\n"
                inside_function = True
            elif inside_function and line.strip().startswith("def "):
                functions[function_name] = functions.get(function_name) + line
                function_name = ""
                inside_function = False
            elif inside_function and not line.strip().startswith("\"\"\""):
                functions[function_name] = functions.get(function_name) + line + "\n"

        exec(functions.get("zscore_normalization"), globals())
        exec(functions.get("preprocess"), globals())
        exec(functions.get("traintest_split"), globals())
            
        def test_dtc_training(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = DecisionTreeClassifier(random_state=42)
            model.fit(X_train, y_train)
            self.assertIsNotNone(model)
            self.assertTrue(hasattr(model, 'max_depth'))
        def test_dtc_prediction(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = DecisionTreeClassifier(random_state=42)
            model.fit(X_train, y_train)
            predictions = model.predict(X_test)
            self.assertEqual(len(predictions), len(X_test))
        def test_dtc_accuracy(self):
            file_path = 'https://raw.githubusercontent.com/tsimhadri-ews/internproject/malware-detection-0/src/MalwareData.csv'
            df = pd.read_csv(file_path, sep='|')
            df = preprocess(df)
            X_train, X_test, y_train, y_test = traintest_split(df)
            model = DecisionTreeClassifier(random_state=42)
            model.fit(X_train, y_train)
            predictions = model.predict(X_test)
            accuracy = accuracy_score(y_test, predictions)
            f1 = f1_score(y_test, predictions)
            self.assertGreaterEqual(accuracy, 0.9)
            self.assertGreaterEqual(f1, 0.9)

    suite = unittest.TestLoader().loadTestsFromTestCase(TestRunModel)
    unittest.TextTestRunner(verbosity=4,stream=sys.stderr).run(suite)